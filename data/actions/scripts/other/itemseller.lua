-- rest of config (item prices) is under function, paste there your items list from npc
local config = {
	price_percent = 80, -- how many % of shop price player receive when sell by 'item seller'
	cash_to_bank = false -- try to send cash automaticly to bank account (try to put in bp and  then send to bank)
}
 
shopModule = {shopItems = {}}
function shopModule:new()
	local obj = {}
	setmetatable(obj, self)
	self.__index = self
	return obj
end
 
function shopModule:addSellableItem(names, itemid, cost, realName)
	if(self.shopItems[itemid] == nil) then
		self.shopItems[itemid] = {sellPrice = -1}
	end
	self.shopItems[itemid].sellPrice = cost
end
 
function shopModule:addBuyableItemContainer(names, container, itemid, cost, subType, realName) end
function shopModule:addBuyableItem(names, itemid, cost, subType, realName) end
 
function onUse(cid, item, fromPosition, itemEx, toPosition)

	msg = ""
	local pos = getCreaturePosition(cid)
	
	if getTilePzInfo(pos) == true then
		if(shopModule.shopItems[itemEx.itemid] ~= nil) then
			count = 1
			if(itemEx.type > 1 and isItemStackable(itemEx.itemid)) then
				count = itemEx.type
			end
			cash = math.ceil(shopModule.shopItems[itemEx.itemid].sellPrice * count / 100 * config.price_percent)
			doRemoveItem(itemEx.uid)
			msg = 'You sold ' .. count .. ' ' .. getItemNameById(itemEx.itemid) .. ' for ' .. cash .. ' gold coins'
			if(cash > 0) then
				doPlayerAddMoney(cid, cash)
				if(config.cash_to_bank) then
					doPlayerDepositMoney(cid, cash)
					msg = msg .. ' (cash auto transfered to bank account or drop on floor)'
				end
			end
			doSendAnimatedText(fromPosition, "$$$", TEXTCOLOR_LIGHTBLUE)
		else
			msg = getItemNameById(itemEx.itemid) .. " is not sellable item"
		end
	else
		msg = "You have to stand in PZ"
	end
	doPlayerSendTextMessage(cid, MESSAGE_INFO_DESCR, msg .. '.')
	return false
end
 
-- here paste your list of items from NPC lua file
-- #### SELLABLE ####
shopModule:addSellableItem({'wand of inferno', 'wand of inferno'},              2187, 3000,     'wand of inferno')
shopModule:addSellableItem({'wand of cosmic energy', 'wand of cosmic energy'},              2189, 2000,     'wand of cosmic energy')
-- dist
shopModule:addSellableItem({'crossbow', 'cross bow'}, 2455, 200)
shopModule:addSellableItem({'bow'}, 2456, 100)
-- swords
shopModule:addSellableItem({'spike sword', 'spikesword'}, 2383, 200)
shopModule:addSellableItem({'broadsword', 'broad sword'}, 2413, 150)
shopModule:addSellableItem({'jagged sword'}, 8602, 200)
shopModule:addSellableItem({'serpent sword'}, 2409, 700)
shopModule:addSellableItem({'crimson sword'}, 7385, 600)
shopModule:addSellableItem({'two handed sword', 'two-handed sword', '2h sword', 'twohanded sword'}, 2377, 400)
shopModule:addSellableItem({'wyvern fang', 'wyrven fang'}, 7408, 2500)
shopModule:addSellableItem({'fire sword'}, 2392, 5000)
shopModule:addSellableItem({'crystal sword'}, 7449, 5000)
shopModule:addSellableItem({'bright sword'}, 2407, 10000)
shopModule:addSellableItem({'epee'}, 2438, 15000)
shopModule:addSellableItem({'djinn blade'}, 2451, 25000)
shopModule:addSellableItem({'assassin dagger'}, 7404, 25000)
shopModule:addSellableItem({'haunted blade'}, 7407, 35000)
shopModule:addSellableItem({'pharaoh sword'}, 2446, 40000)
shopModule:addSellableItem({'blacksteel sword'}, 7406, 5000)
shopModule:addSellableItem({'ice rapier'}, 2396, 1000)
shopModule:addSellableItem({'relic sword'}, 7383, 25000)
shopModule:addSellableItem({'bloody edge'}, 7416, 50000)
shopModule:addSellableItem({'mercenary sword'}, 7386, 25000)
shopModule:addSellableItem({'dragon slayer'}, 7402, 14000)
shopModule:addSellableItem({'mystic blade'}, 7384, 20000)
shopModule:addSellableItem({'thaian sword'}, 7391, 20000)
shopModule:addSellableItem({'giant sword'}, 2393, 17000)
shopModule:addSellableItem({'nightmare blade'}, 7418, 35000)
shopModule:addSellableItem({'demonrage sword'}, 7382, 21000)
shopModule:addSellableItem({'justice seeker'}, 7390, 60000)
shopModule:addSellableItem({'magic sword', 'sov'}, 2400, 650000)
shopModule:addSellableItem({'emerald sword'}, 8930, 450000)
shopModule:addSellableItem({'avenger'}, 6528, 200000)
shopModule:addSellableItem({'warlord sword'}, 2408, 700000)
shopModule:addSellableItem({'magic longsword', 'magic long sword'}, 2390, 230000)
-- axes
shopModule:addSellableItem({'steel axe'}, 8601, 300)
shopModule:addSellableItem({'battle axe'}, 2378, 80)
shopModule:addSellableItem({'barbarian axe'}, 2429, 150)
shopModule:addSellableItem({'knight axe'}, 2430, 2000)
shopModule:addSellableItem({'fire axe'}, 2432, 9000)
shopModule:addSellableItem({'ripper lance'}, 3964, 500)
shopModule:addSellableItem({'dwarven axe'}, 2435, 1500)
shopModule:addSellableItem({'obsidian lance'}, 2425, 400)
shopModule:addSellableItem({'beastslayer axe'}, 3962, 2000)
shopModule:addSellableItem({'double axe'}, 2387, 200)
shopModule:addSellableItem({'halberd'}, 2381, 400)
shopModule:addSellableItem({'daramanian waraxe'}, 2440, 1000)
shopModule:addSellableItem({'naginata'}, 2426, 50)
shopModule:addSellableItem({'noble axe'}, 7456, 9000)
shopModule:addSellableItem({'dreaded cleaver'}, 7419, 35000)
shopModule:addSellableItem({'headchopper'}, 7380, 4000)
shopModule:addSellableItem({'ornamented axe'}, 7411, 20000)
shopModule:addSellableItem({'titan axe'}, 7413, 100000)
shopModule:addSellableItem({'vile axe'}, 7388, 200000)
shopModule:addSellableItem({'heroic axe'}, 7389, 10000)
shopModule:addSellableItem({'twin axe'}, 2447, 25000)
shopModule:addSellableItem({'guardian halberd'}, 2427, 13000)
shopModule:addSellableItem({"reaper's axe"}, 7420, 35000)
shopModule:addSellableItem({'dragon lance'}, 2414, 16000)
shopModule:addSellableItem({'royal axe'}, 7434, 60000)
shopModule:addSellableItem({'war axe'}, 7753, 9000)
shopModule:addSellableItem({"revager's axe"}, 2443, 50000)
shopModule:addSellableItem({'ruthless axe'}, 6553, 350000)
shopModule:addSellableItem({'stonecutter axe'}, 2431, 650000)
shopModule:addSellableItem({'hellforged axe'}, 8924, 850000)
shopModule:addSellableItem({'great axe'}, 2415, 1400000)
shopModule:addSellableItem({'solar axe'}, 8925, 1600000)
--shopModule:addSellableItem({'demonwing axe'}, , 1500000)
shopModule:addSellableItem({'axe'}, 2386, 10)
-- clubs
shopModule:addSellableItem({'daramanian mace'}, 2439, 200)
shopModule:addSellableItem({'battle hammer'}, 2417, 80)
shopModule:addSellableItem({'banana staff'}, 3966, 1000)
shopModule:addSellableItem({'morning star'}, 2394, 200)
shopModule:addSellableItem({'clerical mace'}, 2423, 400)
shopModule:addSellableItem({'mammoth whopper'}, 7381, 300)
shopModule:addSellableItem({'taurus mace'}, 7425, 500)
shopModule:addSellableItem({'furry club'}, 7432, 1500)
shopModule:addSellableItem({'dragon hammer'}, 2434, 2000)
shopModule:addSellableItem({'dragonbone staff'}, 7430, 4000)
shopModule:addSellableItem({"brutetamer's staff"}, 7379, 1500)
shopModule:addSellableItem({'diamond sceptre'}, 7387, 3000)
shopModule:addSellableItem({'skull staff'}, 2436, 6000)
shopModule:addSellableItem({'sapphire hammer'}, 7437, 7000)
shopModule:addSellableItem({'crystal mace'}, 2445, 70000)
shopModule:addSellableItem({'shadow sceptre'}, 7451, 150000)
shopModule:addSellableItem({'lich staff'}, 3961, 60000)
shopModule:addSellableItem({'lunar staff'}, 7424, 5000)
shopModule:addSellableItem({'silver mace'}, 2424, 250)
shopModule:addSellableItem({'spiked squelcher'}, 7452, 4000)
shopModule:addSellableItem({'orcish maul'}, 7392, 4000)
shopModule:addSellableItem({'amber staff'}, 7426, 9000)
shopModule:addSellableItem({"queen's sceptre"}, 7410, 25000)
shopModule:addSellableItem({'chaos mace'}, 7427, 15000)
shopModule:addSellableItem({'cranial basher'}, 7415, 5000)
--shopModule:addSellableItem({'onyx flail'}, , 120000)
shopModule:addSellableItem({'war hammer'}, 2391, 1500)
shopModule:addSellableItem({'abyss hammer'}, 7414, 130000)
shopModule:addSellableItem({'blessed sceptre'}, 7429, 170000)
shopModule:addSellableItem({'demonbone'}, 7431, 250000)
shopModule:addSellableItem({'hammer of wrath'}, 2444, 350000)
shopModule:addSellableItem({'heavy mace'}, 2452, 390000)
shopModule:addSellableItem({'obsidian truncheon'}, 8928, 120000)
shopModule:addSellableItem({'thunder hammer'}, 2421, 750000)
shopModule:addSellableItem({'arcane staff'}, 2453, 150000)
shopModule:addSellableItem({'obsidian truncheon'}, 8928, 950000)
shopModule:addSellableItem({'dark trinity mace'}, 8927, 1400000)
-- EQ

shopModule:addSellableItem({'dragon scale mail', 'dsm'},                  2492, 40000,    'dragon scale mail')
shopModule:addSellableItem({'dwarven armor', 'dwarven armor'},            2503, 30000,    'dwarven armor')
shopModule:addSellableItem({'golden armor', 'golden armor'},              2466, 20000,    'golden armor')
shopModule:addSellableItem({'plate armor', 'plate armor'},                2463, 400,      'plate armor')
shopModule:addSellableItem({'magic plate armor', 'magic plate armor'},    2472, 350000,    'magic plate armor')
shopModule:addSellableItem({'knight armor', 'knight armor'},              2476, 5000,     'knight armor')
shopModule:addSellableItem({'scale armor', 'scale armor'},                2483, 100,       'scale armor')
shopModule:addSellableItem({'noble armor', 'noble armor'},                2486, 1000,     'noble armor')
shopModule:addSellableItem({'crown armor', 'crown armor'},                2487, 12000,    'crown armor')
shopModule:addSellableItem({'pirate shirt', 'pirate shirt'},              6095, 500,      'pirate shirt')
shopModule:addSellableItem({'dark armor', 'dark armor'},                  2489, 500,      'dark armor')
shopModule:addSellableItem({'demon armor', 'demon armor'},                2494, 1200000,   'demon armor')
shopModule:addSellableItem({'amazon armor', 'amazon armor'},              2500, 1500,   'amazon armor')
shopModule:addSellableItem({'elven armor', 'elven armor'},                2505, 130000,   'elven armor')
shopModule:addSellableItem({'native armor', 'native armor'},              2508, 3000,     'native armor')
shopModule:addSellableItem({'blue robe', 'blue robe'},                    2656, 11000,    'blue robe')
shopModule:addSellableItem({'terra mantle', 'terra mantle'},              7884, 10000,    'terra mantle')
shopModule:addSellableItem({'glacier rope', 'glacier rope'},              7897, 15000,    'glacier rope')
shopModule:addSellableItem({'lighting robe', 'lighting robe'},            7898, 20000,    'lighting robe')
shopModule:addSellableItem({'dragon scale legs', 'dsl'},                  2469, 1200000,   'dragon scale legs')
shopModule:addSellableItem({'golden legs', 'golden legs'},                2470, 100000,   'golden legs')
shopModule:addSellableItem({'knight legs', 'knight legs'},                2477, 5000,     'knight legs')
shopModule:addSellableItem({'brass legs', 'brass legs'},                  2478, 90,       'brass legs')
shopModule:addSellableItem({'crown legs', 'crown legs'},                  2488, 12000,    'crown legs')
shopModule:addSellableItem({'demon legs', 'demon legs'},                  2495, 1000000,   'demon legs')
shopModule:addSellableItem({'dwarven legs', 'dwarven legs'},              2504, 3000,     'dwarven legs')
shopModule:addSellableItem({'elven legs', 'elven legs'},                  2507, 150000,   'elven legs')
shopModule:addSellableItem({'plate legs', 'plate legs'},                  2647, 200,      'plate legs')
shopModule:addSellableItem({'mammoth fur shorts', 'mfs'},                 7464, 300,      'mammoth fur shorts')
shopModule:addSellableItem({'terra legs', 'terra legs'},                  7885, 60000,    'terra legs')
shopModule:addSellableItem({'lighting legs', 'lighting legs'},            7895, 50000,    'lighting legs')
shopModule:addSellableItem({'glacier kilt', 'glacier kilt'},              7896, 55000,    'glacier kilt')
shopModule:addSellableItem({'bast skirt', 'bast skirt'},                  3983, 8000,     'bast skirt')
shopModule:addSellableItem({'blue legs', 'blue legs'},                    7730, 15000,    'blue legs')
shopModule:addSellableItem({'mastermind shield', 'mastermind shield'},    2514, 120000,    'mastermind shield')
shopModule:addSellableItem({'guardian shield', 'guardian shield'},        2515, 2000,     'guardian shield')
shopModule:addSellableItem({'dragon shield', 'dragon shield'},            2516, 5000,     'dragon shield')
shopModule:addSellableItem({'beholder shield', 'beholder shield'},        2518, 1000,     'beholder shield')
shopModule:addSellableItem({'crown shield', 'crown shield'},              2519, 8000,     'crown shield')
shopModule:addSellableItem({'demon shield', 'demon shield'},              2520, 30000,    'demon shield')
shopModule:addSellableItem({'dark shield', 'dark shield'},                2521, 500,      'dark shield')
shopModule:addSellableItem({'great shield', 'great shield'},              2522, 300000,    'great shield')
shopModule:addSellableItem({'blessed shield', 'blessed shield'},          2523, 400000,   'blessed shield')
shopModule:addSellableItem({'ornamented shield', 'ornamented shield'},    2524, 2000,     'ornamented shield')
shopModule:addSellableItem({'dwarven shield', 'dwarven shield'},          2525, 100,      'dwarven shield')
shopModule:addSellableItem({'rose shield', 'rose shield'},                2527, 80000,    'rose shield')
shopModule:addSellableItem({'tower shield', 'tower shield'},              2528, 8000,     'tower shield')
shopModule:addSellableItem({'black shield', 'black shield'},              2529, 1000,     'black shield')
shopModule:addSellableItem({'viking shield', 'viking shield'},            2531, 100,      'viking shield')
shopModule:addSellableItem({'ancient shield', 'ancient shield'},          2532, 1000,     'ancient shield')
shopModule:addSellableItem({'griffin shield', 'griffin shield'},          2533, 1500,     'griffin shield')
shopModule:addSellableItem({'vampire shield', 'vampire shield'},          2534, 15000,    'vampire shield')
shopModule:addSellableItem({'castle shield', 'castle shield'},            2535, 35000,    'castle shield')
shopModule:addSellableItem({'medusa shield', 'medusa shield'},            2536, 9000,     'medusa shield')
shopModule:addSellableItem({'amazon shield', 'amazon shield'},            2537, 4000,   'amazon shield')
shopModule:addSellableItem({'eagle shield', 'eagle shield'},              2538, 300000,   'eagle shield')
shopModule:addSellableItem({'phoenix shield', 'phoenix shield'},          2539, 500000,   'phoenix shield')
shopModule:addSellableItem({'scarab shield', 'scarab shield'},            2540, 2000,     'scarab shield')
shopModule:addSellableItem({'bone shield', 'bone shield'},                2541, 160,      'bone shield')
shopModule:addSellableItem({'tempest shield', 'tempest shield'},          2542, 1000000,  'tempest shield')
shopModule:addSellableItem({'tusk shield', 'tusk shield'},                3973, 1000,     'tusk shield')
shopModule:addSellableItem({'sentinel shield', 'sentinel shield'},        3974, 700,      'sentinel shield')
shopModule:addSellableItem({'salamander shield', 'salamander shield'},    3975, 600,      'salamander shield')
shopModule:addSellableItem({'tortoise shield', 'tortoise shield'},        6131, 200,      'tortoise shield')
shopModule:addSellableItem({'nightmare shield', 'nightmare shield'},      6391, 120000,  'nightmare shield')
shopModule:addSellableItem({'steel helmet', 'steel helmet'},              2457, 300,      'steel helmet')
shopModule:addSellableItem({'iron helmet', 'iron helmet'},                2459, 150,      'iron helmet')
shopModule:addSellableItem({'devil helmet', 'devil helmet'},              2462, 1200,     'devil helmet')
shopModule:addSellableItem({'golden helmet', 'golden helmet'},            2471, 1500000,  'golden helmet')
shopModule:addSellableItem({'viking helmet', 'viking helmet'},            2473, 50,       'viking helmet')
shopModule:addSellableItem({'winged helmet', 'winged helmet'},            2474, 1300000,  'winged helmet')
shopModule:addSellableItem({'warrior helmet', 'warrior helmet'},          2475, 5000,     'warrior helmet')
shopModule:addSellableItem({'strange helmet', 'strange helmet'},          2479, 500,      'strange helmet')
shopModule:addSellableItem({'dark helmet', 'dark helmet'},                2490, 250,      'dark helmet')
shopModule:addSellableItem({'crown helmet', 'crown helmet'},              2491, 2500,     'crown helmet')
shopModule:addSellableItem({'demon helmet', 'demon helmet'},              2493, 200000,   'demon helmet')
shopModule:addSellableItem({'horned helmet', 'horned helmet'},            2496, 1000000,  'horned helmet')
shopModule:addSellableItem({'crusader helmet', 'crusader helmet'},        2497, 6000,     'crusader helmet')
shopModule:addSellableItem({'royal helmet', 'royal helmet'},              2498, 30000,    'royal helmet')
shopModule:addSellableItem({'amazon helmet', 'amazon helmet'},            2499, 1400,  'amazon helmet')
shopModule:addSellableItem({'ceremonial mask', 'ceremonial mask'},        2501, 1000,     'ceremonial mask')
shopModule:addSellableItem({'dwarven helmet', 'dwarven helmet'},          2502, 100000,   'dwarven helmet')
shopModule:addSellableItem({'dragon scale helmet', 'drascahelm'},         2506, 400000,   'dragon scale helmet')
shopModule:addSellableItem({'mystic turban', 'mystic turban'},            2663, 3000,     'mystic turban')
shopModule:addSellableItem({'post officers hat', 'post'},                 2665, 50000,    'post officers hat')
shopModule:addSellableItem({'tribal mask', 'tribal mask'},                3967, 300,      'tribal mask')
shopModule:addSellableItem({'horseman helmet', 'horseman helmet'},        3969, 1000,     'horseman helmet')
shopModule:addSellableItem({'feather headdress', 'feather head'},         3970, 1500,     'feather headdress')
shopModule:addSellableItem({'charmer tiara', 'charmer tiara'},            3971, 13000,    'charmer tiara')
shopModule:addSellableItem({'beholder helmet', 'beholder helmet'},        3972, 20000,    'beholder helmet')
shopModule:addSellableItem({'santa hat', 'santa hat'},                    6531, 2300,     'santa hat')
shopModule:addSellableItem({'skull helmet', 'skull helmet'},              5741, 50000,    'skull helmet')
shopModule:addSellableItem({'pirate hat', 'pirate hat'},                  6096, 1000,     'pirate hat')
shopModule:addSellableItem({'krimhorn helmet', 'krimhorn helmet'},        7461, 250,      'krimhorn helmet')
shopModule:addSellableItem({'ragnir helmet', 'ragnir helmet'},            7462, 400,      'ragnir helmet')
shopModule:addSellableItem({'fur cap', 'fur cap'},                        7458, 30000,    'fur cap')
shopModule:addSellableItem({'earmuffs', 'earmuffs'},                      7459, 1000,     'earmuffs')
shopModule:addSellableItem({'terra hood', 'terra hood'},                  7903, 3500,     'terra hood')
shopModule:addSellableItem({'lighting headband', 'lighba'},               7901, 8000,     'lighting headband')
shopModule:addSellableItem({'glacier mask', 'glacier mask'},              7902, 4000,     'glacier mask')
shopModule:addSellableItem({'boots of haste', 'boots of haste'},          2195, 30000,    'boots of haste')
shopModule:addSellableItem({'soft boots', 'soft boots'},                  6132, 400000,   'soft boots')
shopModule:addSellableItem({'boots of waterwalking', 'bowwalk'},          2358, 1000000,  'boots of waterwalking')
shopModule:addSellableItem({'traper boots', 'traper boots'},              2641, 3000,     'traper boots')
shopModule:addSellableItem({'sandals', 'sandals'},                        2642, 100,      'sandals')
shopModule:addSellableItem({'steel boots', 'steel boots'},                2645, 30000,    'steel boots')
shopModule:addSellableItem({'golden boots', 'golden boots'},              2646, 400000,   'golden boots')
shopModule:addSellableItem({'crocodile boots', 'crocodile boots'},        3982, 1000,     'crocodile boots')
shopModule:addSellableItem({'pirate boots', 'pirate boots'},              5462, 5000,     'pirate boots')
shopModule:addSellableItem({'fur boots', 'fur boots'},                    7457, 2000,     'fur boots')
shopModule:addSellableItem({'terra boots', 'terra boots'},                7886, 5000,     'terra boots')
shopModule:addSellableItem({'magma boots', 'magma boots'},                7891, 7000,     'magma boots')
shopModule:addSellableItem({'glacier shoes', 'glacier shoes'},            7892, 3000,     'glacier shoes')
shopModule:addSellableItem({'lighting boots', 'lighting boots'},          7893, 7000,     'lighting boots')  